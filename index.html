<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>
        Calculator
    </title>
</head>

<body>

    <div class="container">
        <div class="row justify-content-start">
            <div class="col-4 ">
                <input readonly class="form-control" id="stack">
            </div>
        </div>    
        <div class="row justify-content-center">
            <div class="col-9">
                <input readonly class="form-control" id="display">
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput('(')">(</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput(')')">)</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput('C')">C</button>
            </div>
            <div class="col-2 nopadding ">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput('CE')">CE</button>
            </div>

        </div>
        <div class="row justify-content-center">
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary  btn-block" onclick="sendInput(1)">1</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput(2)">2</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput(3)">3</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput('/')">/</button>
            </div>
        </div>

        <!-- End of row -->
        <div class="row justify-content-center">
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput(4)">4</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput(5)">5</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput(6)">6</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput('x')">x</button>
            </div>
        </div>

        <!-- End of row -->
        <div class="row justify-content-center">
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput(7)">7</button>
            </div>
            <div class="col-2 nopadding">

                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput(8)">8</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput(9)">9</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput('-')">-</button>
            </div>
        </div>
        <!-- End of row -->
        <div class="row justify-content-center">
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block" onclick="sendInput(0)">0</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block"onclick="sendInput('.')">.</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block"onclick="sendInput('=')">=</button>
            </div>
            <div class="col-2 nopadding">
                <button type="button" class="btn btn-secondary btn-block"onclick="sendInput('+')">+</button>
            </div>
        </div>

        <!-- End of row -->

        <!-- End of container -->
    </div>
    <script>

        let input;
        let temp;
        let answer;
        let prev;
        let flag = 0;
        let parant;
        let paranFlag = 0;
        
        function sendInput(param) {
            input = param;
            
            if (paranFlag){
            	parant += input;
            }
            if (Number.isInteger(input)) {
							document.getElementById("display").value += input.toString();
            }
            else if (input === "C") {
                document.getElementById("display").value = "";
                if (prev === "C"){
                	document.getElementById("stack").value = "";
                  answer = "";
                }
            }
            else if (input === "CE") {
            		let disp = document.getElementById("display").value;
                document.getElementById("display").value = disp.slice(0,-1);
            }
            else if (input === "x") {
                temp = document.getElementById("display").value;
                document.getElementById("display").value = temp +" "+"* ";
                if (!Number.isInteger(prev)){
                	flag = 1;
                }
                
            }
         		else if (input === "/") {
                temp = document.getElementById("display").value;
                document.getElementById("display").value = temp +" "+"/ ";
                 if (!Number.isInteger(prev)){
                	flag = 1;
                }               
            }
            else if (input === "+") {
                temp = document.getElementById("display").value;
                document.getElementById("display").value = temp +" "+"+ ";
                 if (!Number.isInteger(prev)){
                	flag = 1;
                }               
            }
            else if(input === "-") {
                temp = document.getElementById("display").value;
                document.getElementById("display").value = temp +" "+"- ";
                if (!Number.isInteger(prev)){
                	flag = 1;
                }              
            }
            else if(input === "=") {
                let op = document.getElementById("display").value;
                let stack;
                if (flag === 1){
                	stack = document.getElementById("stack").value +" "+op;
                  answer = eval(stack);
                  flag = 0;
                }
                else{
                	answer = eval(op);
                }  
                document.getElementById("stack").value = answer;
                document.getElementById("display").value = "";
            }
            else if(input === "(") {
            		if (prev !== '+' || prev !== '-' || prev !== '/' || prev !== 'x'){
                	temp = document.getElementById("display").value + ' *';
                }
                else{
                	temp = document.getElementById("display").value;
                }
                document.getElementById("display").value = temp +" "+"( ";
                paranFlag = 1;
            }
            else if(input === ")") {

                temp = document.getElementById("display").value;
                document.getElementById("display").value = temp +" "+") ";
                paranFlag = 0;
                let idx1 = temp.indexOf('(');
                let idx2 = temp.indexOf(')');
                temp.splice(idx1, idx2, parant);
                parant = ""
                
            } 
						prev = input;
                       
   
   					 
        }
    </script>
    <!-- End of Script -->
</body>

